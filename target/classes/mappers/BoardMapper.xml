<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="edu.Board.mapper.boardMapper">
	
	 <select id = "selectAll" resultType = "BoardVo" parameterType="SearchVo">
	 	SELECT b.bidx
	 		 , b.title
	 		 , b.midx
	 		 , b.content
	 		 , b.wdate	
	 		 , u.name
	 		 , u.id	 
	 	  FROM springboard b, springuser u
	 	 WHERE b.midx = u.midx
	 	 <if test='searchType != null and searchType.equals("title")'>
	 	 AND b.title like '%'||#{searchValue}||'%'
	 	 </if>
	 	 <if test='searchType != null and searchType.equals("contentWriter")'>
	 	 AND b.content like '%'||#{searchValue}||'%'
	 	  OR u.name like '%'||#{searchValue}||'%'
	 	 </if>
	 	 ORDER BY bidx desc
	 </select>
	 
	 <insert id = "boradWrite" parameterType="BoardVo">
	 	INSERT INTO springboard (
	 			  bidx
	 			, title
	 			, content
	 			, midx
	 			, wdate
	 	) VALUES (
	 			  springboard_bidx.nextval
	 			, #{title}
	 			, #{content}
	 			, #{midx}
	 			, sysdate
	 	)
	 </insert>
	 
	 <select id = "selectOne" resultType ="boardVo" parameterType = "int">
	 	SELECT b.bidx
	 		 , b.title
	 		 , b.midx
	 		 , b.content
	 		 , b.wdate	
	 		 , u.name
	 		 , u.id	 
	 	  FROM springboard b, springuser u
	 	 WHERE b.midx = u.midx
	 	   AND b.bidx = #{bidx}
	 </select>
</mapper>